---
title: "Introducing openpoweRlifting"
output: rmarkdown::html_vignette
date: "2021-10-11"
vignette: >
  %\VignetteIndexEntry{Introducing_openpoweRlifting}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(openpoweRlifting)
library(pins)
```

openpoweRifting is a library that handles keeping an up-to-date copy of the [OpenPowerlifting](https://www.openpowerlifting.org/) data.

It achieves this with the [pins](https://cran.r-project.org/web/packages/pins/index.html) library, and we would encourage you to read the [intro to pins vignette](https://cran.r-project.org/web/packages/pins/vignettes/pins.html). 

# Examples

## Defaults - IPF affiliates only

openpoweRlifting has 1 function - `pin_opl`. By default it will grab the [nightly IFP dataset](https://openpowerlifting.gitlab.io/opl-csv/bulk-csv.html) and pin it to `board_local` as `"opl-ipf"`. 

You can then read the data with `pin_read(board_local(), "opl-ipf")`. 

By means of example, I'll find the max totals for each equipment class:

```{r}
pin_opl()

pin_read(board_local(), "opl-ipf") %>%
  dplyr::group_by(equipment) %>%
  dplyr::slice_max(n=1, order_by=total_kg) %>%
  dplyr::ungroup() %>%
  knitr::kable()
```

## The complete dataset

We can download the full dataset with `ipf = FALSE`, and reading the `"opl-all"` pin. 

```{r}
pin_opl(ipf = FALSE)

pin_read(board_local(), "opl-all") %>%
  dplyr::group_by(equipment) %>%
  dplyr::slice_max(n=1, order_by=total_kg) %>%
  dplyr::ungroup() %>%
  knitr::kable()
```
